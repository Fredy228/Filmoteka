var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},r=e.parcelRequired76b;null==r&&((r=function(e){if(e in t)return t[e].exports;if(e in n){var r=n[e];delete n[e];var a={id:e,exports:{}};return t[e]=a,r.call(a.exports,a,a.exports),a.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){n[e]=t},e.parcelRequired76b=r);var a=r("1O3u4"),i=r("6cLkv"),o=r("lgxtW"),s=r("d3vkx"),l=r("8NSUd"),d=r("8ENg6"),c=r("dPnIr");a=r("1O3u4"),a=r("1O3u4");function u(){a.refs.container.innerHTML="",a.refs.container.dataset.ids=""}var f=r("dSqGA");f=r("dSqGA"),a=r("1O3u4");function m(e,t){const{page:n,total_pages:r}=e;let i=function(e){switch(e){case"trand":return console.log("trand-true"),a.refs.numbersPageTrand;case"filter":return console.log("filter-true"),a.refs.numbersPageFilter;case"search":return console.log("search-true"),a.refs.numbersPageSearch;default:return a.refs.numbersPageTrand}}(t);a.refs.numbersPageFilter.innerHTML="",a.refs.numbersPageSearch.innerHTML="",a.refs.numbersPageTrand.innerHTML="";let o=[];if(document.documentElement.clientWidth>767){if(r>9&&n<6){o.push("<div id='left' class=\"container__numbers-arrow-box\"><span id='left' class=\"container__numbers-arrow-left\"></span></div>");for(let e=1;e<=r;e+=1){if(e>8){o.push("<span id='right' class=\"container__numbers-span\">...</span>"),o.push(`<li class="container__numbers-item" data-page="${r}">${r}</li>`);break}o.push(`<li class="container__numbers-item" data-page="${e}">${e}</li>`)}o.push("<div id='right' class=\"container__numbers-arrow-box\"><span id='right' class=\"container__numbers-arrow-right\"></span></div>"),i.insertAdjacentHTML("beforeend",o.join(""))}if(r<9){for(let e=1;e<=r&&!(e>9);e+=1)o.push(`<li class="container__numbers-item" data-page="${e}">${e}</li>`);i.insertAdjacentHTML("beforeend",o.join(""))}if(r>9&&n>=6&&n<r-6){o.push("<div id='left' class=\"container__numbers-arrow-box\"><span id='left' class=\"container__numbers-arrow-left\"></span></div>"),o.push('<li class="container__numbers-item" data-page="1">1</li>'),o.push("<span id='left' class=\"container__numbers-span\">...</span>");for(let e=n-2;e<n;e+=1)o.push(`<li class="container__numbers-item" data-page="${e}">${e}</li>`);o.push(`<li class="container__numbers-item" data-page="${n}">${n}</li>`);for(let e=n+1;e<n+3;e+=1)o.push(`<li class="container__numbers-item" data-page="${e}">${e}</li>`);o.push("<span id='right' class=\"container__numbers-span\">...</span>"),o.push(`<li class="container__numbers-item" data-page="${r}">${r}</li>`),o.push("<div id='right' class=\"container__numbers-arrow-box\"><span id='right' class=\"container__numbers-arrow-right\"></span></div>"),i.insertAdjacentHTML("beforeend",o.join(""))}if(r>9&&n>r-6){o.push("<div id='right' class=\"container__numbers-arrow-box\"><span id='right' class=\"container__numbers-arrow-right\"></span></div>");for(let e=r;e>=r-8;e-=1)o.push(`<li class="container__numbers-item" data-page="${e}">${e}</li>`);o.push("<span id='left' class=\"container__numbers-span\">...</span>"),o.push('<li class="container__numbers-item" data-page="1">1</li>'),o.push("<div id='left' class=\"container__numbers-arrow-box\"><span id='left' class=\"container__numbers-arrow-left\"></span></div>"),i.insertAdjacentHTML("beforeend",o.reverse().join(""))}}else{if(r>5&&n<4){o.push("<div id='left' class=\"container__numbers-arrow-box\"><span id='left' class=\"container__numbers-arrow-left\"></span></div>");for(let e=1;e<=r&&!(e>5);e+=1)o.push(`<li class="container__numbers-item" data-page="${e}">${e}</li>`);o.push("<div id='right' class=\"container__numbers-arrow-box\"><span id='right' class=\"container__numbers-arrow-right\"></span></div>"),i.insertAdjacentHTML("beforeend",o.join(""))}if(r<6){for(let e=1;e<=r&&!(e>5);e+=1)o.push(`<li class="container__numbers-item" data-page="${e}">${e}</li>`);i.insertAdjacentHTML("beforeend",o.join(""))}if(r>5&&n>=4&&n<r-4){o.push("<div id='left' class=\"container__numbers-arrow-box\"><span id='left' class=\"container__numbers-arrow-left\"></span></div>");for(let e=n-2;e<n;e+=1)o.push(`<li class="container__numbers-item" data-page="${e}">${e}</li>`);o.push(`<li class="container__numbers-item" data-page="${n}">${n}</li>`);for(let e=n+1;e<n+3;e+=1)o.push(`<li class="container__numbers-item" data-page="${e}">${e}</li>`);o.push("<div id='right' class=\"container__numbers-arrow-box\"><span id='right' class=\"container__numbers-arrow-right\"></span></div>"),i.insertAdjacentHTML("beforeend",o.join(""))}if(r>5&&n>r-4){o.push("<div id='right' class=\"container__numbers-arrow-box\"><span id='right' class=\"container__numbers-arrow-right\"></span></div>");for(let e=r;e>=r-5;e-=1)o.push(`<li class="container__numbers-item" data-page="${e}">${e}</li>`);o.push("<div id='left' class=\"container__numbers-arrow-box\"><span id='left' class=\"container__numbers-arrow-left\"></span></div>"),i.insertAdjacentHTML("beforeend",o.reverse().join(""))}}document.querySelector(`[data-page="${n}"]`).classList.add("is-active-page")}o=r("lgxtW");function g(e){(async function(e){const t={option:"/trending/movie/day",page:e};(0,o.makeLangParam)(t),window.loader();try{const e=await window.filmoteka.fetchFilms(t);return window.loaderRemove(),e}catch(e){console.log(e),window.loaderRemove()}})(e).then((e=>(u(),(0,f.createFilmCardMarkup)(e.results),e))).then((e=>{m(e,"trand")}))}var p=r("4NA3t"),w=r("1i23U");a=r("1O3u4"),f=r("dSqGA"),o=r("lgxtW");a.refs.searchForm.addEventListener("submit",_);let v="";let h=1;async function _(e){e&&(e.preventDefault(),v=a.refs.searchInput.value);console.log(v);const t={option:"/search/movie",nameFilm:`&query=${encodeURIComponent(v.trim())}`,page:h};if(""===v)return a.refs.massages.classList.remove("hidden"),void b();(0,o.makeLangParam)(t),window.loader();try{const e=await window.filmoteka.fetchFilms(t);if(console.log(e),0===e.results.length)return a.refs.massages.classList.remove("hidden"),b(),a.refs.searchForm.reset(),void window.loaderRemove();console.log(e),u(),(0,f.createFilmCardMarkup)(e.results),a.refs.searchForm.reset(),a.refs.modalOffer.innerHTML="",m(e,"search"),window.loaderRemove()}catch(e){console.log(e),window.loaderRemove()}}function b(){setTimeout((()=>{a.refs.massages.classList.add("hidden")}),5e3)}const y=_;r("d6MLv");l=r("8NSUd"),a=r("1O3u4");var L=r("8QeDr");f=r("dSqGA");async function F(e){const{id:t,poster_path:n,genre_ids:r,title:a,release_date:i,vote_average:o}=e;let s,l="";try{l=(await(0,L.getGenres)()).filter((e=>r.includes(e.id))).map((e=>e.name)).join(", ");let e=localStorage.getItem("siteOptions");""===l&&"ua"===e&&(l="Потрібно подивитись"),""===l&&"en"===e&&(l="Need watch")}catch(e){console.log(e)}return s=n?`https://image.tmdb.org/t/p/w500${n}`:f.DEFAULT_IMG,`<li class="input-offer__item" data-id="${t}">              \n              <img class="input-offer__img" src="${s}" alt="${a}"\n              loading="lazy" width="70" height="150">              \n              <div class="input-offer__desc">                        \n                  <h3 class="input-offer__title">${a}</h3>\n                  <p class="input-offer__genres">${l}</p>\n                  <p id="release_date">\n                  ${i}<span class="film-card__rating input-offer__rating">${o}</span>\n                  </p>                      \n              </div>              \n          </li>`}o=r("lgxtW");var $={},S=/^\s+|\s+$/g,I=/^[-+]0x[0-9a-f]+$/i,T=/^0b[01]+$/i,k=/^0o[0-7]+$/i,x=parseInt,O="object"==typeof e&&e&&e.Object===Object&&e,M="object"==typeof self&&self&&self.Object===Object&&self,j=O||M||Function("return this")(),H=Object.prototype.toString,E=Math.max,B=Math.min,R=function(){return j.Date.now()};function N(e,t,n){var r,a,i,o,s,l,d=0,c=!1,u=!1,f=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function m(t){var n=r,i=a;return r=a=void 0,d=t,o=e.apply(i,n)}function g(e){return d=e,s=setTimeout(w,t),c?m(e):o}function p(e){var n=e-l;return void 0===l||n>=t||n<0||u&&e-d>=i}function w(){var e=R();if(p(e))return v(e);s=setTimeout(w,function(e){var n=t-(e-l);return u?B(n,i-(e-d)):n}(e))}function v(e){return s=void 0,f&&r?m(e):(r=a=void 0,o)}function h(){var e=R(),n=p(e);if(r=arguments,a=this,l=e,n){if(void 0===s)return g(l);if(u)return s=setTimeout(w,t),m(l)}return void 0===s&&(s=setTimeout(w,t)),o}return t=A(t)||0,C(n)&&(c=!!n.leading,i=(u="maxWait"in n)?E(A(n.maxWait)||0,t):i,f="trailing"in n?!!n.trailing:f),h.cancel=function(){void 0!==s&&clearTimeout(s),d=0,r=l=a=s=void 0},h.flush=function(){return void 0===s?o:v(R())},h}function C(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function A(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==H.call(e)}(e))return NaN;if(C(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=C(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(S,"");var n=T.test(e);return n||k.test(e)?x(e.slice(2),n?2:8):I.test(e)?NaN:+e}$=function(e,t,n){var r=!0,a=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return C(n)&&(r="leading"in n?!!n.leading:r,a="trailing"in n?!!n.trailing:a),N(e,t,{leading:r,maxWait:t,trailing:a})};a.refs.searchInput.addEventListener("input",$((async function(e){const t=e.target.value.trim();if(t.length<3)return a.refs.searchInput.classList.add("not-valid"),void(a.refs.modalOffer.innerHTML="");a.refs.modalOffer.innerHTML="",a.refs.searchInput.classList.remove("not-valid");const n={option:"/search/movie",nameFilm:`&query=${encodeURIComponent(t)}`};try{(0,o.makeLangParam)(n);const e=await window.filmoteka.fetchFilms(n);e.results.sort(((e,t)=>t.vote_average-e.vote_average));let t=3;if(0===e.results.length)return;e.results.length<t&&(t=e.results.length);let r="";for(let n=0;n<t;n+=1)r+=await F(e.results[n]);a.refs.modalOffer.insertAdjacentHTML("beforeend",r)}catch(e){console.log(e)}}),1e3)),a.refs.searchInput.addEventListener("focusout",(e=>{setTimeout((()=>{a.refs.modalOffer.classList.add("visually-hidden")}),150)})),a.refs.searchInput.addEventListener("focusin",(e=>{a.refs.modalOffer.classList.remove("visually-hidden")})),a.refs.modalOffer.addEventListener("click",(function(e){if("IMG"===e.target.nodeName||"LI"===e.target.nodeName){a.refs.modalOffer.innerHTML="",a.refs.searchForm.reset(),a.refs.modalOverlay.classList.remove("visually-hidden");const t=e.target.dataset.id;window.modal.openModal(t),a.refs.modalOverlay.dataset.modal=t}})),r("ju0sR"),window.filmoteka=new(0,i.Filmoteka),window.fireBase=new(0,l.FireBaseData),window.movieLibrary=new(0,s.MovieLibrary),window.filterHendler=new class{ratingFilterOnChange(e){const t=e.target.value;""===t?(localStorage.setItem("filterByRating",""),window.filmoteka.filterByRating=""):(window.filmoteka.filterByRating=t,localStorage.setItem("filterByRating",t)),window.filterHendler.updateFilters()}genreFilterOnChange(e){const t=e.target.value;""===t?(localStorage.setItem("filterByGenre",""),window.filmoteka.filterByGenre=""):(window.filmoteka.filterByGenre=t,localStorage.setItem("filterByGenre",t)),window.filterHendler.updateFilters()}dataFilterOnChange(e){const t=e.target.value;""===t?(localStorage.setItem("dataFilter",""),window.filmoteka.dataFilter=""):(window.filmoteka.dataFilter=t,localStorage.setItem("dataFilter",t)),window.filterHendler.updateFilters()}updateFilters(e=1){if(localStorage.getItem("filterByRating")||localStorage.getItem("filterByGenre")||localStorage.getItem("dataFilter")){window.loader();const t={region:"",page:e,option:"/discover/movie"};filmoteka.fetchFilms(t).then((e=>{console.log(e),u(),(0,f.createFilmCardMarkup)(e.results),m(e,"filter")})).finally((()=>window.loaderRemove()))}else g()}constructor(){let e=(new Date).getFullYear();a.refs.dateFilter.innerHTML=(()=>{let t='<option value="" selected data-text="yearsFilter">Years</option>';for(let n=e;n>=1900;n-=1)t+=`<option value="${n}">${n}</option>`;return t})()}},window.modal=new(0,p.Modal),window.loader=w.spinerStart,window.loaderRemove=w.spinerStop,a.refs.login.addEventListener("click",(e=>{window.fireBase.login()})),window.addEventListener("scroll",d.hidenButton),document.querySelector(".btn-up").addEventListener("click",d.upClick),(0,o.setLanguage)(),window.movieLibrary.updateLang(),document.querySelector(".translate").addEventListener("click",(()=>{(0,o.changeLanguage)(),localStorage.removeItem("newsArr"),location.reload()})),(0,c.setColor)(),a.refs.colorSelector.addEventListener("click",c.changeColor),function(){let e=document.querySelector("#rating-filter");e.addEventListener("change",window.filterHendler.ratingFilterOnChange),localStorage.getItem("filterByRating")&&(window.filmoteka.filterByRating=localStorage.getItem("filterByRating"),e.value=localStorage.getItem("filterByRating"));let t=document.querySelector("#genre-filter");t.addEventListener("change",window.filterHendler.genreFilterOnChange),localStorage.getItem("filterByGenre")&&(window.filmoteka.filterByGenre=localStorage.getItem("filterByGenre"),t.value=localStorage.getItem("filterByGenre"));let n=document.querySelector("#date-filter");n.addEventListener("change",window.filterHendler.dataFilterOnChange),localStorage.getItem("dataFilter")&&(window.filmoteka.dataFilter=localStorage.getItem("dataFilter"),n.value=localStorage.getItem("dataFilter"));window.filterHendler.updateFilters()}(),a.refs.numbersPageTrand.addEventListener("click",(function(e){"LI"===e.target.nodeName&&(G=e.target.textContent,g(G));"DIV"!==e.target.nodeName&&"SPAN"!==e.target.nodeName||("left"===e.target.id&&G>1&&(G-=1,g(G)),"right"===e.target.id&&(G+=1,g(G)))})),a.refs.numbersPageFilter.addEventListener("click",(function(e){"LI"===e.target.nodeName&&window.filterHendler.updateFilters(e.target.textContent)})),a.refs.numbersPageSearch.addEventListener("click",(function(e){"LI"===e.target.nodeName&&(t=e.target.textContent,h=t,y());var t}));let G=1;
//# sourceMappingURL=index.cc9a41cd.js.map
