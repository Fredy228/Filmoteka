!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},r={},a=t.parcelRequired76b;null==a&&((a=function(e){if(e in n)return n[e].exports;if(e in r){var t=r[e];delete r[e];var a={id:e,exports:{}};return n[e]=a,t.call(a.exports,a,a.exports),a.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){r[e]=t},t.parcelRequired76b=a);var i=a("7Sf3J"),o=a("8x2sk"),s=a("9GT1X"),c=a("8kBMg"),l=a("gyWj4"),d=a("aHxE2"),u=a("9Isww"),f=a("8MBJY"),p=a("a2hTj");i=a("7Sf3J"),i=a("7Sf3J");function m(){i.refs.container.innerHTML="",i.refs.container.dataset.ids=""}var g=a("5vsmo"),v=a("bpxeT"),h=a("2TvXO");g=a("5vsmo"),i=a("7Sf3J");function w(e,t){var n=e.page,r=e.total_pages;var a=function(e){switch(e){case"trand":return console.log("trand-true"),i.refs.numbersPageTrand;case"filter":return console.log("filter-true"),i.refs.numbersPageFilter;case"search":return console.log("search-true"),i.refs.numbersPageSearch;default:return i.refs.numbersPageTrand}}(t);i.refs.numbersPageFilter.innerHTML="",i.refs.numbersPageSearch.innerHTML="",i.refs.numbersPageTrand.innerHTML="";var o=[];if(document.documentElement.clientWidth>767){if(r>9&&n<6){o.push("<div id='left' class=\"container__numbers-arrow-box\"><span id='left' class=\"container__numbers-arrow-left\"></span></div>");for(var s=1;s<=r;s+=1){if(s>8){o.push("<span id='right' class=\"container__numbers-span\">...</span>"),o.push('<li class="container__numbers-item" data-page="'.concat(r,'">').concat(r,"</li>"));break}o.push('<li class="container__numbers-item" data-page="'.concat(s,'">').concat(s,"</li>"))}o.push("<div id='right' class=\"container__numbers-arrow-box\"><span id='right' class=\"container__numbers-arrow-right\"></span></div>"),a.insertAdjacentHTML("beforeend",o.join(""))}if(r<9){for(var c=1;c<=r&&!(c>9);c+=1)o.push('<li class="container__numbers-item" data-page="'.concat(c,'">').concat(c,"</li>"));a.insertAdjacentHTML("beforeend",o.join(""))}if(r>9&&n>=6&&n<r-6){o.push("<div id='left' class=\"container__numbers-arrow-box\"><span id='left' class=\"container__numbers-arrow-left\"></span></div>"),o.push('<li class="container__numbers-item" data-page="1">1</li>'),o.push("<span id='left' class=\"container__numbers-span\">...</span>");for(var l=n-2;l<n;l+=1)o.push('<li class="container__numbers-item" data-page="'.concat(l,'">').concat(l,"</li>"));o.push('<li class="container__numbers-item" data-page="'.concat(n,'">').concat(n,"</li>"));for(var d=n+1;d<n+3;d+=1)o.push('<li class="container__numbers-item" data-page="'.concat(d,'">').concat(d,"</li>"));o.push("<span id='right' class=\"container__numbers-span\">...</span>"),o.push('<li class="container__numbers-item" data-page="'.concat(r,'">').concat(r,"</li>")),o.push("<div id='right' class=\"container__numbers-arrow-box\"><span id='right' class=\"container__numbers-arrow-right\"></span></div>"),a.insertAdjacentHTML("beforeend",o.join(""))}if(r>9&&n>r-6){o.push("<div id='right' class=\"container__numbers-arrow-box\"><span id='right' class=\"container__numbers-arrow-right\"></span></div>");for(var u=r;u>=r-8;u-=1)o.push('<li class="container__numbers-item" data-page="'.concat(u,'">').concat(u,"</li>"));o.push("<span id='left' class=\"container__numbers-span\">...</span>"),o.push('<li class="container__numbers-item" data-page="1">1</li>'),o.push("<div id='left' class=\"container__numbers-arrow-box\"><span id='left' class=\"container__numbers-arrow-left\"></span></div>"),a.insertAdjacentHTML("beforeend",o.reverse().join(""))}}else{if(r>5&&n<4){o.push("<div id='left' class=\"container__numbers-arrow-box\"><span id='left' class=\"container__numbers-arrow-left\"></span></div>");for(var f=1;f<=r&&!(f>5);f+=1)o.push('<li class="container__numbers-item" data-page="'.concat(f,'">').concat(f,"</li>"));o.push("<div id='right' class=\"container__numbers-arrow-box\"><span id='right' class=\"container__numbers-arrow-right\"></span></div>"),a.insertAdjacentHTML("beforeend",o.join(""))}if(r<6){for(var p=1;p<=r&&!(p>5);p+=1)o.push('<li class="container__numbers-item" data-page="'.concat(p,'">').concat(p,"</li>"));a.insertAdjacentHTML("beforeend",o.join(""))}if(r>5&&n>=4&&n<r-4){o.push("<div id='left' class=\"container__numbers-arrow-box\"><span id='left' class=\"container__numbers-arrow-left\"></span></div>");for(var m=n-2;m<n;m+=1)o.push('<li class="container__numbers-item" data-page="'.concat(m,'">').concat(m,"</li>"));o.push('<li class="container__numbers-item" data-page="'.concat(n,'">').concat(n,"</li>"));for(var g=n+1;g<n+3;g+=1)o.push('<li class="container__numbers-item" data-page="'.concat(g,'">').concat(g,"</li>"));o.push("<div id='right' class=\"container__numbers-arrow-box\"><span id='right' class=\"container__numbers-arrow-right\"></span></div>"),a.insertAdjacentHTML("beforeend",o.join(""))}if(r>5&&n>r-4){o.push("<div id='right' class=\"container__numbers-arrow-box\"><span id='right' class=\"container__numbers-arrow-right\"></span></div>");for(var v=r;v>=r-5;v-=1)o.push('<li class="container__numbers-item" data-page="'.concat(v,'">').concat(v,"</li>"));o.push("<div id='left' class=\"container__numbers-arrow-box\"><span id='left' class=\"container__numbers-arrow-left\"></span></div>"),a.insertAdjacentHTML("beforeend",o.reverse().join(""))}}document.querySelector('[data-page="'.concat(n,'"]')).classList.add("is-active-page")}s=a("9GT1X");function b(e){(function(e){return _.apply(this,arguments)})(e).then((function(e){return m(),(0,g.createFilmCardMarkup)(e.results),e})).then((function(e){w(e,"trand")}))}function _(){return(_=e(v)(e(h).mark((function t(n){var r,a;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/trending/movie/day",r={option:"/trending/movie/day",page:n},(0,s.makeLangParam)(r),window.loader(),e.prev=4,e.next=7,window.filmoteka.fetchFilms(r);case 7:return a=e.sent,window.loaderRemove(),e.abrupt("return",a);case 12:e.prev=12,e.t0=e.catch(4),console.log(e.t0),window.loaderRemove();case 16:case"end":return e.stop()}}),t,null,[[4,12]])})))).apply(this,arguments)}var y=function(){"use strict";function t(){e(f)(this,t);var n=(new Date).getFullYear();i.refs.dateFilter.innerHTML=function(){for(var e='<option value="" selected data-text="yearsFilter">Years</option>',t=n;t>=1900;t-=1)e+='<option value="'.concat(t,'">').concat(t,"</option>");return e}()}return e(p)(t,[{key:"ratingFilterOnChange",value:function(e){var t=e.target.value;""===t?(localStorage.setItem("filterByRating",""),window.filmoteka.filterByRating=""):(window.filmoteka.filterByRating=t,localStorage.setItem("filterByRating",t)),window.filterHendler.updateFilters()}},{key:"genreFilterOnChange",value:function(e){var t=e.target.value;""===t?(localStorage.setItem("filterByGenre",""),window.filmoteka.filterByGenre=""):(window.filmoteka.filterByGenre=t,localStorage.setItem("filterByGenre",t)),window.filterHendler.updateFilters()}},{key:"dataFilterOnChange",value:function(e){var t=e.target.value;""===t?(localStorage.setItem("dataFilter",""),window.filmoteka.dataFilter=""):(window.filmoteka.dataFilter=t,localStorage.setItem("dataFilter",t)),window.filterHendler.updateFilters()}},{key:"updateFilters",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(localStorage.getItem("filterByRating")||localStorage.getItem("filterByGenre")||localStorage.getItem("dataFilter")){window.loader();var t={region:"",page:e,option:"/discover/movie"};filmoteka.fetchFilms(t).then((function(e){console.log(e),m(),(0,g.createFilmCardMarkup)(e.results),w(e,"filter")})).finally((function(){return window.loaderRemove()}))}else b()}}]),t}(),L=a("bUH0J"),x=a("j0SV0");v=a("bpxeT"),h=a("2TvXO"),i=a("7Sf3J"),g=a("5vsmo"),s=a("9GT1X");i.refs.searchForm.addEventListener("submit",F);var k="",T=1;function F(e){return S.apply(this,arguments)}function S(){return(S=e(v)(e(h).mark((function t(n){var r,a;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&(n.preventDefault(),k=i.refs.searchInput.value),"/search/movie",console.log(k),r={option:"/search/movie",nameFilm:"&query=".concat(encodeURIComponent(k.trim())),page:T},""!==k){e.next=8;break}return i.refs.massages.classList.remove("hidden"),I(),e.abrupt("return");case 8:return(0,s.makeLangParam)(r),window.loader(),e.prev=10,e.next=13,window.filmoteka.fetchFilms(r);case 13:if(a=e.sent,console.log(a),0!==a.results.length){e.next=21;break}return i.refs.massages.classList.remove("hidden"),I(),i.refs.searchForm.reset(),window.loaderRemove(),e.abrupt("return");case 21:console.log(a),m(),(0,g.createFilmCardMarkup)(a.results),i.refs.searchForm.reset(),i.refs.modalOffer.innerHTML="",w(a,"search"),window.loaderRemove(),e.next=34;break;case 30:e.prev=30,e.t0=e.catch(10),console.log(e.t0),window.loaderRemove();case 34:case"end":return e.stop()}}),t,null,[[10,30]])})))).apply(this,arguments)}function I(){setTimeout((function(){i.refs.massages.classList.add("hidden")}),5e3)}var j=F;a("44sU7");l=a("gyWj4"),v=a("bpxeT"),h=a("2TvXO"),i=a("7Sf3J"),v=a("bpxeT"),h=a("2TvXO");var M=a("dGF2p");g=a("5vsmo");function O(e){return H.apply(this,arguments)}function H(){return(H=e(v)(e(h).mark((function t(n){var r,a,i,o,s,c,l,d,u,f;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.id,a=n.poster_path,i=n.genre_ids,o=n.title,s=n.release_date,c=n.vote_average,l="",e.prev=2,e.next=5,(0,M.getGenres)();case 5:d=e.sent,l=d.filter((function(e){return i.includes(e.id)})).map((function(e){return e.name})).join(", "),u=localStorage.getItem("siteOptions"),""===l&&"ua"===u&&(l="Потрібно подивитись"),""===l&&"en"===u&&(l="Need watch"),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.log(e.t0);case 15:return f=a?"https://image.tmdb.org/t/p/w500".concat(a):g.DEFAULT_IMG,e.abrupt("return",'<li class="input-offer__item" data-id="'.concat(r,'">              \n              <img class="input-offer__img" src="').concat(f,'" alt="').concat(o,'"\n              loading="lazy" width="70" height="150">              \n              <div class="input-offer__desc">                        \n                  <h3 class="input-offer__title">').concat(o,'</h3>\n                  <p class="input-offer__genres">').concat(l,'</p>\n                  <p id="release_date">\n                  ').concat(s,'<span class="film-card__rating input-offer__rating">').concat(c,"</span>\n                  </p>                      \n              </div>              \n          </li>"));case 18:case"end":return e.stop()}}),t,null,[[2,12]])})))).apply(this,arguments)}s=a("9GT1X");var B={},E=a("l5bVx"),R="Expected a function",C=/^\s+|\s+$/g,G=/^[-+]0x[0-9a-f]+$/i,N=/^0b[01]+$/i,P=/^0o[0-7]+$/i,A=parseInt,q="object"==typeof t&&t&&t.Object===Object&&t,D="object"==typeof self&&self&&self.Object===Object&&self,J=q||D||Function("return this")(),X=Object.prototype.toString,U=Math.max,W=Math.min,$=function(){return J.Date.now()};function V(e,t,n){var r,a,i,o,s,c,l=0,d=!1,u=!1,f=!0;if("function"!=typeof e)throw new TypeError(R);function p(t){var n=r,i=a;return r=a=void 0,l=t,o=e.apply(i,n)}function m(e){return l=e,s=setTimeout(v,t),d?p(e):o}function g(e){var n=e-c;return void 0===c||n>=t||n<0||u&&e-l>=i}function v(){var e=$();if(g(e))return h(e);s=setTimeout(v,function(e){var n=t-(e-c);return u?W(n,i-(e-l)):n}(e))}function h(e){return s=void 0,f&&r?p(e):(r=a=void 0,o)}function w(){var e=$(),n=g(e);if(r=arguments,a=this,c=e,n){if(void 0===s)return m(c);if(u)return s=setTimeout(v,t),p(c)}return void 0===s&&(s=setTimeout(v,t)),o}return t=z(t)||0,Y(n)&&(d=!!n.leading,i=(u="maxWait"in n)?U(z(n.maxWait)||0,t):i,f="trailing"in n?!!n.trailing:f),w.cancel=function(){void 0!==s&&clearTimeout(s),l=0,r=c=a=s=void 0},w.flush=function(){return void 0===s?o:h($())},w}function Y(t){var n=void 0===t?"undefined":e(E)(t);return!!t&&("object"==n||"function"==n)}function z(t){if("number"==typeof t)return t;if(function(t){return"symbol"==(void 0===t?"undefined":e(E)(t))||function(e){return!!e&&"object"==typeof e}(t)&&"[object Symbol]"==X.call(t)}(t))return NaN;if(Y(t)){var n="function"==typeof t.valueOf?t.valueOf():t;t=Y(n)?n+"":n}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(C,"");var r=N.test(t);return r||P.test(t)?A(t.slice(2),r?2:8):G.test(t)?NaN:+t}B=function(e,t,n){var r=!0,a=!0;if("function"!=typeof e)throw new TypeError(R);return Y(n)&&(r="leading"in n?!!n.leading:r,a="trailing"in n?!!n.trailing:a),V(e,t,{leading:r,maxWait:t,trailing:a})};function K(){return(K=e(v)(e(h).mark((function t(n){var r,a,o,c,l,d;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((r=n.target.value.trim()).length<3)){e.next=5;break}return i.refs.searchInput.classList.add("not-valid"),i.refs.modalOffer.innerHTML="",e.abrupt("return");case 5:return i.refs.modalOffer.innerHTML="",i.refs.searchInput.classList.remove("not-valid"),"/search/movie",a={option:"/search/movie",nameFilm:"&query=".concat(encodeURIComponent(r))},e.prev=9,(0,s.makeLangParam)(a),e.next=13,window.filmoteka.fetchFilms(a);case 13:if((o=e.sent).results.sort((function(e,t){return t.vote_average-e.vote_average})),c=3,0!==o.results.length){e.next=18;break}return e.abrupt("return");case 18:o.results.length<c&&(c=o.results.length),l="",d=0;case 21:if(!(d<c)){e.next=29;break}return e.t0=l,e.next=25,O(o.results[d]);case 25:l=e.t0+=e.sent;case 26:d+=1,e.next=21;break;case 29:i.refs.modalOffer.insertAdjacentHTML("beforeend",l),e.next=35;break;case 32:e.prev=32,e.t1=e.catch(9),console.log(e.t1);case 35:case"end":return e.stop()}}),t,null,[[9,32]])})))).apply(this,arguments)}i.refs.searchInput.addEventListener("input",B((function(e){return K.apply(this,arguments)}),1e3)),i.refs.searchInput.addEventListener("focusout",(function(e){setTimeout((function(){i.refs.modalOffer.classList.add("visually-hidden")}),150)})),i.refs.searchInput.addEventListener("focusin",(function(e){i.refs.modalOffer.classList.remove("visually-hidden")})),i.refs.modalOffer.addEventListener("click",(function(e){if("IMG"===e.target.nodeName||"LI"===e.target.nodeName){i.refs.modalOffer.innerHTML="",i.refs.searchForm.reset(),i.refs.modalOverlay.classList.remove("visually-hidden");var t=e.target.dataset.id;window.modal.openModal(t),i.refs.modalOverlay.dataset.modal=t}})),a("dldig"),window.filmoteka=new(0,o.Filmoteka),window.fireBase=new(0,l.FireBaseData),window.movieLibrary=new(0,c.MovieLibrary),window.filterHendler=new y,window.modal=new(0,L.Modal),window.loader=x.spinerStart,window.loaderRemove=x.spinerStop,i.refs.login.addEventListener("click",(function(e){window.fireBase.login()})),window.addEventListener("scroll",d.hidenButton),document.querySelector(".btn-up").addEventListener("click",d.upClick),(0,s.setLanguage)(),window.movieLibrary.updateLang(),document.querySelector(".translate").addEventListener("click",(function(){(0,s.changeLanguage)(),localStorage.removeItem("newsArr"),location.reload()})),(0,u.setColor)(),i.refs.colorSelector.addEventListener("click",u.changeColor),function(){var e=document.querySelector("#rating-filter");e.addEventListener("change",window.filterHendler.ratingFilterOnChange),localStorage.getItem("filterByRating")&&(window.filmoteka.filterByRating=localStorage.getItem("filterByRating"),e.value=localStorage.getItem("filterByRating"));var t=document.querySelector("#genre-filter");t.addEventListener("change",window.filterHendler.genreFilterOnChange),localStorage.getItem("filterByGenre")&&(window.filmoteka.filterByGenre=localStorage.getItem("filterByGenre"),t.value=localStorage.getItem("filterByGenre"));var n=document.querySelector("#date-filter");n.addEventListener("change",window.filterHendler.dataFilterOnChange),localStorage.getItem("dataFilter")&&(window.filmoteka.dataFilter=localStorage.getItem("dataFilter"),n.value=localStorage.getItem("dataFilter"));window.filterHendler.updateFilters()}(),i.refs.numbersPageTrand.addEventListener("click",(function(e){"LI"===e.target.nodeName&&b(Q=e.target.textContent);"DIV"!==e.target.nodeName&&"SPAN"!==e.target.nodeName||("left"===e.target.id&&Q>1&&b(Q-=1),"right"===e.target.id&&b(Q+=1))})),i.refs.numbersPageFilter.addEventListener("click",(function(e){"LI"===e.target.nodeName&&window.filterHendler.updateFilters(e.target.textContent)})),i.refs.numbersPageSearch.addEventListener("click",(function(e){"LI"===e.target.nodeName&&(t=e.target.textContent,T=t,j());var t}));var Q=1}();
//# sourceMappingURL=index.e4d57132.js.map
